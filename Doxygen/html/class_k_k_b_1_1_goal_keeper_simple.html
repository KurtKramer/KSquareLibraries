<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>KSquare Utilities: KKB::GoalKeeperSimple Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="KSquareLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KSquare Utilities
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_k_k_b_1_1_goal_keeper_simple.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_k_k_b_1_1_goal_keeper_simple-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">KKB::GoalKeeperSimple Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A simple/ light-weight implementation of critical section blocking.  
 <a href="class_k_k_b_1_1_goal_keeper_simple.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_goal_keeper_simple_8h_source.html">GoalKeeperSimple.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a5e73be577d62a04e6980bb94027f653b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a></td></tr>
<tr class="separator:a5e73be577d62a04e6980bb94027f653b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a51edc4dadfce50698b176d32de92bb6b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a51edc4dadfce50698b176d32de92bb6b">Blocked</a> ()</td></tr>
<tr class="memdesc:a51edc4dadfce50698b176d32de92bb6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will return true if any thread lock on this instance of "GoalKeeperSimple".  <a href="#a51edc4dadfce50698b176d32de92bb6b">More...</a><br /></td></tr>
<tr class="separator:a51edc4dadfce50698b176d32de92bb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ccd73565c390cfca0a3b7f47be1c92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#ad6ccd73565c390cfca0a3b7f47be1c92">BlockedByAnotherThread</a> ()</td></tr>
<tr class="memdesc:ad6ccd73565c390cfca0a3b7f47be1c92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if a different thread has this instance of "GoalKeeperSimple" locked.  <a href="#ad6ccd73565c390cfca0a3b7f47be1c92">More...</a><br /></td></tr>
<tr class="separator:ad6ccd73565c390cfca0a3b7f47be1c92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d9c3b3552977dfbdd187112d89dc53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a01d9c3b3552977dfbdd187112d89dc53">BlockerThreadId</a> ()</td></tr>
<tr class="memdesc:a01d9c3b3552977dfbdd187112d89dc53"><td class="mdescLeft">&#160;</td><td class="mdescRight">ThreadId of thread that currently holds the Block -1 indicates no Block.  <a href="#a01d9c3b3552977dfbdd187112d89dc53">More...</a><br /></td></tr>
<tr class="separator:a01d9c3b3552977dfbdd187112d89dc53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a529882f7ace4f8300508d4dee9c3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a28a529882f7ace4f8300508d4dee9c3e">EndBlock</a> ()</td></tr>
<tr class="memdesc:a28a529882f7ace4f8300508d4dee9c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends the block and allows other threads to pass through StatBlock.  <a href="#a28a529882f7ace4f8300508d4dee9c3e">More...</a><br /></td></tr>
<tr class="separator:a28a529882f7ace4f8300508d4dee9c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e05c58c7d851dc6ad858803c37309a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a89e05c58c7d851dc6ad858803c37309a">MemoryConsumedEstimated</a> () const </td></tr>
<tr class="separator:a89e05c58c7d851dc6ad858803c37309a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13ef01792887b13a97315780f05fe319"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a13ef01792887b13a97315780f05fe319">Name</a> () const </td></tr>
<tr class="separator:a13ef01792887b13a97315780f05fe319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8bcf9dcd7f07275aaac8ecdedac8cb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#aa8bcf9dcd7f07275aaac8ecdedac8cb1">StartBlock</a> ()</td></tr>
<tr class="memdesc:aa8bcf9dcd7f07275aaac8ecdedac8cb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates a Block as long as another thread has not already locked this object.  <a href="#aa8bcf9dcd7f07275aaac8ecdedac8cb1">More...</a><br /></td></tr>
<tr class="separator:aa8bcf9dcd7f07275aaac8ecdedac8cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a7001b3a689776a4ef2b56219f965b26c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a7001b3a689776a4ef2b56219f965b26c">Create</a> (const <a class="el" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> &amp;_name, volatile <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a> &amp;_newGoalKeeper)</td></tr>
<tr class="memdesc:a7001b3a689776a4ef2b56219f965b26c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object and avoid a race condition doing it.  <a href="#a7001b3a689776a4ef2b56219f965b26c">More...</a><br /></td></tr>
<tr class="separator:a7001b3a689776a4ef2b56219f965b26c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cdf495c3b29603a4434ad16a76bc049"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a3cdf495c3b29603a4434ad16a76bc049">CreateAndStartBlock</a> (const <a class="el" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> &amp;_name, volatile <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a> &amp;_newGoalKeeper, bool &amp;_didNotExistYet)</td></tr>
<tr class="memdesc:a3cdf495c3b29603a4434ad16a76bc049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object and avoid a race condition doing it.  <a href="#a3cdf495c3b29603a4434ad16a76bc049">More...</a><br /></td></tr>
<tr class="separator:a3cdf495c3b29603a4434ad16a76bc049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1098674662d5e6a03fb4af27e1c5af5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#aa1098674662d5e6a03fb4af27e1c5af5">Destroy</a> (volatile <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a> &amp;_goalKeeperInstance)</td></tr>
<tr class="memdesc:aa1098674662d5e6a03fb4af27e1c5af5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys an existing instance of <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a>.  <a href="#aa1098674662d5e6a03fb4af27e1c5af5">More...</a><br /></td></tr>
<tr class="separator:aa1098674662d5e6a03fb4af27e1c5af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b38fb338438be5de8e2aaa2ac3b227d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">FinalCleanUp</a> ()</td></tr>
<tr class="memdesc:a8b38fb338438be5de8e2aaa2ac3b227d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will be registered with 'atexit' so that it will be called when program is unloaded from memory.  <a href="#a8b38fb338438be5de8e2aaa2ac3b227d">More...</a><br /></td></tr>
<tr class="separator:a8b38fb338438be5de8e2aaa2ac3b227d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a3c22ebe8b841379f92ef7cdfe3aed61c"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a3c22ebe8b841379f92ef7cdfe3aed61c">KKQueue&lt; GoalKeeperSimple &gt;</a></td></tr>
<tr class="separator:a3c22ebe8b841379f92ef7cdfe3aed61c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple/ light-weight implementation of critical section blocking. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8h_source.html#l00029">29</a> of file <a class="el" href="_goal_keeper_simple_8h_source.html">GoalKeeperSimple.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a5e73be577d62a04e6980bb94027f653b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a>* <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">KKB::GoalKeeperSimple::GoalKeeperSimplePtr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_goal_keeper_simple_8h_source.html#l00032">32</a> of file <a class="el" href="_goal_keeper_simple_8h_source.html">GoalKeeperSimple.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a51edc4dadfce50698b176d32de92bb6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GoalKeeperSimple::Blocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will return true if any thread lock on this instance of "GoalKeeperSimple". </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00076">76</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">return</span>  blocked;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}  <span class="comment">/* Blocked */</span></div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad6ccd73565c390cfca0a3b7f47be1c92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GoalKeeperSimple::BlockedByAnotherThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if a different thread has this instance of "GoalKeeperSimple" locked. </p>
<p><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> keeps track of which thread has a lock on this instance of '<a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a>'. This way we know if the calling thread is not the one to have a lock on the thread. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00083">83</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>References <a class="el" href="_o_sservices_8cpp_source.html#l02752">KKB::osGetThreadId()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span>  (!blocked)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>  curThreadId = <a class="code" href="namespace_k_k_b.html#aa1d581b15163a41037c43bdbd800d0f8">KKB::osGetThreadId</a> ();</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">return</span>  (blocked  &amp;&amp;  (curThreadId != blockerThreadId));</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div><div class="ttc" id="namespace_k_k_b_html_a8fa4952cc84fda1de4bec1fbdd8d5b1b"><div class="ttname"><a href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">KKB::kkint32</a></div><div class="ttdeci">__int32 kkint32</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_base_types_8h_source.html#l00088">KKBaseTypes.h:88</a></div></div>
<div class="ttc" id="namespace_k_k_b_html_aa1d581b15163a41037c43bdbd800d0f8"><div class="ttname"><a href="namespace_k_k_b.html#aa1d581b15163a41037c43bdbd800d0f8">KKB::osGetThreadId</a></div><div class="ttdeci">kkint32 osGetThreadId()</div><div class="ttdef"><b>Definition:</b> <a href="_o_sservices_8cpp_source.html#l02752">OSservices.cpp:2752</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a01d9c3b3552977dfbdd187112d89dc53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a> GoalKeeperSimple::BlockerThreadId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ThreadId of thread that currently holds the Block -1 indicates no Block. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00404">404</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>  x = 0;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  x =  blockerThreadId;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">return</span>  x;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div><div class="ttc" id="namespace_k_k_b_html_a8fa4952cc84fda1de4bec1fbdd8d5b1b"><div class="ttname"><a href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">KKB::kkint32</a></div><div class="ttdeci">__int32 kkint32</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_base_types_8h_source.html#l00088">KKBaseTypes.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7001b3a689776a4ef2b56219f965b26c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GoalKeeperSimple::Create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> &amp;&#160;</td>
          <td class="paramname"><em>_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a> &amp;&#160;</td>
          <td class="paramname"><em>_newGoalKeeper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object and avoid a race condition doing it. </p>
<p>In case two different threads try to create the same <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> at the same time you only want one of them to succeed and the other to use same GaolKeeper object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_name</td><td>Name of Goal Keeper object that you want to create. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">_newGoalKeeper</td><td>You pass this in. Create will block out the critical region that creates the <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object. If it was already created, that is != NULL will just return not changing its value. If it is still NULL in the critical section it will create a new instance and set this parameter to its address. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; default security attributes</p>
<p>&lt; initially not owned </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00160">160</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>References <a class="el" href="_goal_keeper_simple_8h_source.html#l00172">KKB::GoalKeeperSimpleList::GoalKeeperSimpleList()</a>.</p>

<p>Referenced by <a class="el" href="_msg_queue_8cpp_source.html#l00029">KKB::MsgQueue::MsgQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#if  defined(WIN32)</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  HANDLE  mutexCreateHandle = CreateMutex (NULL,                 <span class="comment">/**&lt; default security attributes */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                           <span class="keyword">false</span>,                <span class="comment">/**&lt; initially not owned */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                           <span class="stringliteral">&quot;GoalKeeperClass&quot;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                          );</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">if</span>  (!mutexCreateHandle)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> errMsg = <span class="stringliteral">&quot;GoalKeeperSimple::Create   ***ERROR***   CreateMutex failed; returned back NULL;  _name:&quot;</span> + _name;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    cerr &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a> &lt;&lt; errMsg &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a> &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="class_k_k_b_1_1_k_k_exception.html">KKException</a> (errMsg);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  WaitForSingleObject (mutexCreateHandle, INFINITE);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span>  (_newGoalKeeper == NULL)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    _newGoalKeeper = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a> (_name);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span>  (existingGoalKeepers == NULL)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      existingGoalKeepers = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple_list.html">GoalKeeperSimpleList</a> (<span class="keyword">true</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      atexit (<a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">GoalKeeperSimple::FinalCleanUp</a>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#aa9fba4632b54268bf71ecb42dee0b575">PushOnBack</a> (_newGoalKeeper);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  ReleaseMutex (mutexCreateHandle);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  CloseHandle(mutexCreateHandle);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  sem_t*  semHandle = sem_open (<span class="stringliteral">&quot;GoalKeeperClass&quot;</span>, O_CREAT, 0644, 1);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span>  (semHandle == SEM_FAILED)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    cout &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;GoalKeeperSimple::Create  Error[&quot;</span> &lt;&lt; errno &lt;&lt; <span class="stringliteral">&quot;] opening &#39;/GoalKeeperSimple&#39; Semaphore.&quot;</span> &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    perror(<span class="stringliteral">&quot;GoalKeeperSimple::Create   Error Opening Semaphore  &#39;GoalKeeperSimple&#39;&quot;</span>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;GoalKeeperSimple::Create    Error opening &#39;GoalKeeperSimple&#39;.&quot;</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  sem_wait (semHandle);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span>  (_newGoalKeeper == NULL)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    _newGoalKeeper = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a> (_name);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span>  (existingGoalKeepers == NULL)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      existingGoalKeepers = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple_list.html">GoalKeeperSimpleList</a> (<span class="keyword">true</span>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      atexit (<a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">GoalKeeperSimple::FinalCleanUp</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#aa9fba4632b54268bf71ecb42dee0b575">PushOnBack</a> (_newGoalKeeper);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  sem_post (semHandle);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  sem_close (semHandle);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}  <span class="comment">/* Create */</span></div><div class="ttc" id="namespace_k_k_b_html_ad1f50f65af6adc8fa9e6f62d007818a8"><div class="ttname"><a href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">KKB::endl</a></div><div class="ttdeci">HTMLReport &amp;__cdecl endl(HTMLReport &amp;htmlReport)</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_m_l_report_8cpp_source.html#l00240">HTMLReport.cpp:240</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_html"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple.html">KKB::GoalKeeperSimple</a></div><div class="ttdoc">A simple/ light-weight implementation of critical section blocking. </div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8h_source.html#l00029">GoalKeeperSimple.h:29</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_exception_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_exception.html">KKB::KKException</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_exception_8h_source.html#l00027">KKException.h:27</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_queue_html_aa9fba4632b54268bf71ecb42dee0b575"><div class="ttname"><a href="class_k_k_b_1_1_k_k_queue.html#aa9fba4632b54268bf71ecb42dee0b575">KKB::KKQueue::PushOnBack</a></div><div class="ttdeci">virtual void PushOnBack(EntryPtr _entry)</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_queue_8h_source.html#l00398">KKQueue.h:398</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_html_a8b38fb338438be5de8e2aaa2ac3b227d"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">KKB::GoalKeeperSimple::FinalCleanUp</a></div><div class="ttdeci">static void FinalCleanUp()</div><div class="ttdoc">Will be registered with &amp;#39;atexit&amp;#39; so that it will be called when program is unloaded from memory...</div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8cpp_source.html#l00392">GoalKeeperSimple.cpp:392</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_list_html"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple_list.html">KKB::GoalKeeperSimpleList</a></div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8h_source.html#l00169">GoalKeeperSimple.h:169</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_str_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_str.html">KKB::KKStr</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_str_8h_source.html#l00080">KKStr.h:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3cdf495c3b29603a4434ad16a76bc049"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GoalKeeperSimple::CreateAndStartBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> &amp;&#160;</td>
          <td class="paramname"><em>_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">volatile <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a> &amp;&#160;</td>
          <td class="paramname"><em>_newGoalKeeper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>_didNotExistYet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object and avoid a race condition doing it. </p>
<p>Create a new instance of a <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object if it has not already been done and locks it if we create it.</p>
<p>Similar to 'Create' except it will also call the StartBlock method. There is also an additional parameter that will let you know if your call was responsible for creating it.</p>
<p>In case two different threads try to create the same <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> at the same time you only want one of them to succeed and the other to use same GaolKeeper object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_name</td><td>Name of Goal Keeper object that you want to create.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">_newGoalKeeper</td><td>You pass this in. Create will block out the critical region that creates the <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object. If it was already created, that is != NULL will just return not changing its value. If it is still NULL in the critical section it will create a new instance and set this parameter to its address.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_didNotExistYet</td><td>Indicates if this call had to create the <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> instance; if it already existed will return as false.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_name</td><td>Name to be assigned to <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> object. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">_newGoalKeeper</td><td>A pointer to the <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> that already exists or to new one that got created. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_didNotExistYet</td><td>Indicates if the call to 'CreateAndStartBlock' had to create a new instance. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; default security attributes.</p>
<p>&lt; initially not owned. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00231">231</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>References <a class="el" href="_goal_keeper_simple_8h_source.html#l00172">KKB::GoalKeeperSimpleList::GoalKeeperSimpleList()</a>, and <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00117">StartBlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#if  defined(WIN32)</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  HANDLE  mutexCreateHandle = CreateMutex (NULL,                 <span class="comment">/**&lt; default security attributes. */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                           <span class="keyword">false</span>,                <span class="comment">/**&lt; initially not owned.         */</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                           <span class="stringliteral">&quot;GoalKeeperClass&quot;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                          ); </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span>  (!mutexCreateHandle)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> errMsg = <span class="stringliteral">&quot;GoalKeeperSimple::CreateAndStartBlock   ***ERROR***   CreateMutex failed; returned back NULL;  _name:&quot;</span> + _name;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    cerr &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a> &lt;&lt; errMsg &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a> &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="class_k_k_b_1_1_k_k_exception.html">KKException</a>(errMsg);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  WaitForSingleObject (mutexCreateHandle, INFINITE);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span>  (_newGoalKeeper == NULL)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    _didNotExistYet = <span class="keyword">true</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    _newGoalKeeper = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a> (_name);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span>  (existingGoalKeepers == NULL)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      existingGoalKeepers = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple_list.html">GoalKeeperSimpleList</a> (<span class="keyword">true</span>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      atexit (<a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">GoalKeeperSimple::FinalCleanUp</a>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#aa9fba4632b54268bf71ecb42dee0b575">PushOnBack</a> (_newGoalKeeper);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    _didNotExistYet = <span class="keyword">false</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  _newGoalKeeper-&gt;StartBlock ();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  ReleaseMutex (mutexCreateHandle);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  CloseHandle(mutexCreateHandle);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  sem_t*  semHandle = sem_open (<span class="stringliteral">&quot;GoalKeeperClass&quot;</span>, O_CREAT, 0644, 1);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span>  (semHandle == SEM_FAILED)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    cout &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;GoalKeeperSimple::Create  Error[&quot;</span> &lt;&lt; errno &lt;&lt; <span class="stringliteral">&quot;] opening &#39;/GoalKeeperSimple&#39; Semaphore.&quot;</span> &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    perror(<span class="stringliteral">&quot;GoalKeeperSimple::Create   Error Opening Semaphore  &#39;GoalKeeperSimple&#39;&quot;</span>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;GoalKeeperSimple::Create    Error opening &#39;GoalKeeperSimple&#39;.&quot;</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  sem_wait (semHandle);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">if</span>  (_newGoalKeeper == NULL)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    _didNotExistYet = <span class="keyword">true</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    _newGoalKeeper = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a> (_name);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span>  (existingGoalKeepers == NULL)</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      existingGoalKeepers = <span class="keyword">new</span> <a class="code" href="class_k_k_b_1_1_goal_keeper_simple_list.html">GoalKeeperSimpleList</a> (<span class="keyword">true</span>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      atexit (<a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">GoalKeeperSimple::FinalCleanUp</a>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#aa9fba4632b54268bf71ecb42dee0b575">PushOnBack</a> (_newGoalKeeper);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    _didNotExistYet = <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  _newGoalKeeper-&gt;StartBlock ();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  sem_post (semHandle);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  sem_close (semHandle);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}  <span class="comment">/* CreateAndStartBlock */</span></div><div class="ttc" id="namespace_k_k_b_html_ad1f50f65af6adc8fa9e6f62d007818a8"><div class="ttname"><a href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">KKB::endl</a></div><div class="ttdeci">HTMLReport &amp;__cdecl endl(HTMLReport &amp;htmlReport)</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_m_l_report_8cpp_source.html#l00240">HTMLReport.cpp:240</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_html"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple.html">KKB::GoalKeeperSimple</a></div><div class="ttdoc">A simple/ light-weight implementation of critical section blocking. </div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8h_source.html#l00029">GoalKeeperSimple.h:29</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_exception_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_exception.html">KKB::KKException</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_exception_8h_source.html#l00027">KKException.h:27</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_queue_html_aa9fba4632b54268bf71ecb42dee0b575"><div class="ttname"><a href="class_k_k_b_1_1_k_k_queue.html#aa9fba4632b54268bf71ecb42dee0b575">KKB::KKQueue::PushOnBack</a></div><div class="ttdeci">virtual void PushOnBack(EntryPtr _entry)</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_queue_8h_source.html#l00398">KKQueue.h:398</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_html_a8b38fb338438be5de8e2aaa2ac3b227d"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple.html#a8b38fb338438be5de8e2aaa2ac3b227d">KKB::GoalKeeperSimple::FinalCleanUp</a></div><div class="ttdeci">static void FinalCleanUp()</div><div class="ttdoc">Will be registered with &amp;#39;atexit&amp;#39; so that it will be called when program is unloaded from memory...</div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8cpp_source.html#l00392">GoalKeeperSimple.cpp:392</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_list_html"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple_list.html">KKB::GoalKeeperSimpleList</a></div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8h_source.html#l00169">GoalKeeperSimple.h:169</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_str_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_str.html">KKB::KKStr</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_str_8h_source.html#l00080">KKStr.h:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa1098674662d5e6a03fb4af27e1c5af5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GoalKeeperSimple::Destroy </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html#a5e73be577d62a04e6980bb94027f653b">GoalKeeperSimplePtr</a> &amp;&#160;</td>
          <td class="paramname"><em>_goalKeeperInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys an existing instance of <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a>. </p>
<p>Use this method rather than calling the destructor directly. This way the 'existingGoalKeepers' data member can be kept up to date. If for some reason two different threads managed to call this method for the same <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> instance only one of them will actually destroy the instance. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">_goalKeeperInstance</td><td>Instance of <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html" title="A simple/ light-weight implementation of critical section blocking. ">GoalKeeperSimple</a> that is to be destroyed. Upon return it will be set to NULL. </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; default security attributes</p>
<p>&lt; initially not owned </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00313">313</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>Referenced by <a class="el" href="_msg_queue_8cpp_source.html#l00041">KKB::MsgQueue::~MsgQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#if  defined(WIN32)</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  HANDLE  mutexCreateHandle = CreateMutex (NULL,                 <span class="comment">/**&lt; default security attributes */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                           <span class="keyword">false</span>,                <span class="comment">/**&lt; initially not owned */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                           <span class="stringliteral">&quot;GoalKeeperClass&quot;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                          ); </div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (!mutexCreateHandle)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="class_k_k_b_1_1_k_k_str.html">KKStr</a> errMsg = <span class="stringliteral">&quot;GoalKeeperSimple::Destroy   ***ERROR***   CreateMutex failed; returned back NULL&quot;</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    cerr &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a> &lt;&lt; errMsg &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a> &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">endl</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="class_k_k_b_1_1_k_k_exception.html">KKException</a>(errMsg);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  WaitForSingleObject (mutexCreateHandle, INFINITE);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span>  (_goalKeeperInstance == NULL)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// Some other thread managed to destroy this instance.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>  existingInstanceIdx =  existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#ac7c26abdf599669a4b0898534f735f99">PtrToIdx</a> (_goalKeeperInstance);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span>  (existingInstanceIdx &lt; 0)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// If not in list then a  different thread beat us to destroying this instance or it was never created to start with.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#ae362e3b0a128e8a09182e167befda088">DeleteEntry</a> (_goalKeeperInstance);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keyword">delete</span>  _goalKeeperInstance;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      _goalKeeperInstance = NULL;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  ReleaseMutex (mutexCreateHandle);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  CloseHandle(mutexCreateHandle);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  sem_t*  semHandle = sem_open (<span class="stringliteral">&quot;GoalKeeperClass&quot;</span>, O_CREAT, 0644, 1);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span>  (semHandle == SEM_FAILED)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    cout &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;GoalKeeperSimple::Create  Error[&quot;</span> &lt;&lt; errno &lt;&lt; <span class="stringliteral">&quot;] opening &#39;/GoalKeeperSimple&#39; Semaphore.&quot;</span> &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         &lt;&lt; <a class="code" href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">std::endl</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    perror(<span class="stringliteral">&quot;GoalKeeperSimple::Create   Error Opening Semaphore  &#39;GoalKeeperSimple&#39;&quot;</span>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;GoalKeeperSimple::Create    Error opening &#39;GoalKeeperSimple&#39;.&quot;</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  sem_wait (semHandle);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span>  (_goalKeeperInstance == NULL)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// Some other thread managed to destroy this instance.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>  existingInstanceIdx =  existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#ac7c26abdf599669a4b0898534f735f99">PtrToIdx</a> (_goalKeeperInstance);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span>  (existingInstanceIdx &gt;= 0)</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// If not in list then a  different thread beat us to destroying this instance or it was never created to start with.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      existingGoalKeepers-&gt;<a class="code" href="class_k_k_b_1_1_k_k_queue.html#ae362e3b0a128e8a09182e167befda088">DeleteEntry</a> (_goalKeeperInstance);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keyword">delete</span>  _goalKeeperInstance;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      _goalKeeperInstance = NULL;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  sem_post (semHandle);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  sem_close (semHandle);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}  <span class="comment">/* Destroy */</span></div><div class="ttc" id="namespace_k_k_b_html_ad1f50f65af6adc8fa9e6f62d007818a8"><div class="ttname"><a href="namespace_k_k_b.html#ad1f50f65af6adc8fa9e6f62d007818a8">KKB::endl</a></div><div class="ttdeci">HTMLReport &amp;__cdecl endl(HTMLReport &amp;htmlReport)</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_m_l_report_8cpp_source.html#l00240">HTMLReport.cpp:240</a></div></div>
<div class="ttc" id="namespace_k_k_b_html_a8fa4952cc84fda1de4bec1fbdd8d5b1b"><div class="ttname"><a href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">KKB::kkint32</a></div><div class="ttdeci">__int32 kkint32</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_base_types_8h_source.html#l00088">KKBaseTypes.h:88</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_queue_html_ae362e3b0a128e8a09182e167befda088"><div class="ttname"><a href="class_k_k_b_1_1_k_k_queue.html#ae362e3b0a128e8a09182e167befda088">KKB::KKQueue::DeleteEntry</a></div><div class="ttdeci">void DeleteEntry(EntryPtr _entry)</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_queue_8h_source.html#l00684">KKQueue.h:684</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_exception_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_exception.html">KKB::KKException</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_exception_8h_source.html#l00027">KKException.h:27</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_queue_html_ac7c26abdf599669a4b0898534f735f99"><div class="ttname"><a href="class_k_k_b_1_1_k_k_queue.html#ac7c26abdf599669a4b0898534f735f99">KKB::KKQueue::PtrToIdx</a></div><div class="ttdeci">kkint32 PtrToIdx(EntryConstPtr _entry) const </div><div class="ttdef"><b>Definition:</b> <a href="_k_k_queue_8h_source.html#l00761">KKQueue.h:761</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_str_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_str.html">KKB::KKStr</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_str_8h_source.html#l00080">KKStr.h:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28a529882f7ace4f8300508d4dee9c3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GoalKeeperSimple::EndBlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ends the block and allows other threads to pass through StatBlock. </p>
<p>Decrements the variable 'blockerDepth' by one. Once 'blockerDepth' is equal zero the Block on this instance is removed. The idea is that for each time in a row a Thread calls StartBlock it has to call EndBlock the same number of times. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00139">139</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>References <a class="el" href="_k_k_exception_8cpp_source.html#l00045">KKB::KKException::KKException()</a>, <a class="el" href="_k_k_str_8cpp_source.html#l03986">KKB::KKStr::operator+()</a>, <a class="el" href="_k_k_str_8cpp_source.html#l03976">KKB::operator+()</a>, and <a class="el" href="_o_sservices_8cpp_source.html#l02752">KKB::osGetThreadId()</a>.</p>

<p>Referenced by <a class="el" href="_msg_queue_8cpp_source.html#l00058">KKB::MsgQueue::AddMsg()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00086">KKB::MsgQueue::AddMsgs()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00125">KKB::MsgQueue::GetAllMsgs()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00157">KKB::MsgQueue::GetCopyOfLastMsg()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00107">KKB::MsgQueue::GetNextMsg()</a>, and <a class="el" href="_msg_queue_8cpp_source.html#l00146">KKB::MsgQueue::MemoryConsumedEstimated()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>  curThreadId = <a class="code" href="namespace_k_k_b.html#aa1d581b15163a41037c43bdbd800d0f8">KKB::osGetThreadId</a> ();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span>  (!blocked)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="class_k_k_b_1_1_k_k_exception.html">KKB::KKException</a> (<span class="stringliteral">&quot;GoalKeeperSimple::EndBlock    Name[&quot;</span> + name + <span class="stringliteral">&quot;]  Is not currently blocked.&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span>  (curThreadId != blockerThreadId)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="class_k_k_b_1_1_k_k_exception.html">KKB::KKException</a> (<span class="stringliteral">&quot;GoalKeeperSimple::EndBlock    Name[&quot;</span> + name + <span class="stringliteral">&quot;]  ThreadId[&quot;</span> + blockerThreadId + <span class="stringliteral">&quot;] Currently holds Block;  our ThreadId[&quot;</span> + curThreadId + <span class="stringliteral">&quot;]&quot;</span>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  --levels;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span>  (levels &lt; 1)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    blocked = <span class="keyword">false</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    blockerThreadId = -1;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    CriticalSectionEnd ();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}  <span class="comment">/* EndBlock */</span></div><div class="ttc" id="namespace_k_k_b_html_a8fa4952cc84fda1de4bec1fbdd8d5b1b"><div class="ttname"><a href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">KKB::kkint32</a></div><div class="ttdeci">__int32 kkint32</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_base_types_8h_source.html#l00088">KKBaseTypes.h:88</a></div></div>
<div class="ttc" id="namespace_k_k_b_html_aa1d581b15163a41037c43bdbd800d0f8"><div class="ttname"><a href="namespace_k_k_b.html#aa1d581b15163a41037c43bdbd800d0f8">KKB::osGetThreadId</a></div><div class="ttdeci">kkint32 osGetThreadId()</div><div class="ttdef"><b>Definition:</b> <a href="_o_sservices_8cpp_source.html#l02752">OSservices.cpp:2752</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_k_k_exception_html"><div class="ttname"><a href="class_k_k_b_1_1_k_k_exception.html">KKB::KKException</a></div><div class="ttdef"><b>Definition:</b> <a href="_k_k_exception_8h_source.html#l00027">KKException.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b38fb338438be5de8e2aaa2ac3b227d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GoalKeeperSimple::FinalCleanUp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will be registered with 'atexit' so that it will be called when program is unloaded from memory. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00392">392</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span>  (existingGoalKeepers)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keyword">delete</span>  existingGoalKeepers;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    existingGoalKeepers = NULL;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a89e05c58c7d851dc6ad858803c37309a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a> GoalKeeperSimple::MemoryConsumedEstimated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00069">69</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>References <a class="el" href="_k_k_str_8cpp_source.html#l00766">KKB::KKStr::MemoryConsumedEstimated()</a>.</p>

<p>Referenced by <a class="el" href="_msg_queue_8cpp_source.html#l00029">KKB::MsgQueue::MsgQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">return</span>  (<span class="keyword">sizeof</span> (<a class="code" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a>) + name.<a class="code" href="class_k_k_b_1_1_k_k_str.html#afc335bf98a8d4a77dc34215e72068719">MemoryConsumedEstimated</a> ());</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="ttc" id="class_k_k_b_1_1_k_k_str_html_afc335bf98a8d4a77dc34215e72068719"><div class="ttname"><a href="class_k_k_b_1_1_k_k_str.html#afc335bf98a8d4a77dc34215e72068719">KKB::KKStr::MemoryConsumedEstimated</a></div><div class="ttdeci">kkint32 MemoryConsumedEstimated() const </div><div class="ttdef"><b>Definition:</b> <a href="_k_k_str_8cpp_source.html#l00766">KKStr.cpp:766</a></div></div>
<div class="ttc" id="class_k_k_b_1_1_goal_keeper_simple_html"><div class="ttname"><a href="class_k_k_b_1_1_goal_keeper_simple.html">KKB::GoalKeeperSimple</a></div><div class="ttdoc">A simple/ light-weight implementation of critical section blocking. </div><div class="ttdef"><b>Definition:</b> <a href="_goal_keeper_simple_8h_source.html#l00029">GoalKeeperSimple.h:29</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a13ef01792887b13a97315780f05fe319"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_k_k_b_1_1_k_k_str.html">KKStr</a>&amp; KKB::GoalKeeperSimple::Name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_goal_keeper_simple_8h_source.html#l00122">122</a> of file <a class="el" href="_goal_keeper_simple_8h_source.html">GoalKeeperSimple.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{<span class="keywordflow">return</span>  name;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8bcf9dcd7f07275aaac8ecdedac8cb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GoalKeeperSimple::StartBlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiates a Block as long as another thread has not already locked this object. </p>
<p>If it is already blocked processor will sleep and then try again. As long as the variable 'blockerDepth'is greater than zero this instance will be considered blocked. Once a thread has the instance blocked it will increment 'blockerDepth' and return to caller. </p>

<p>Definition at line <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00117">117</a> of file <a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a>.</p>

<p>References <a class="el" href="_o_sservices_8cpp_source.html#l02752">KKB::osGetThreadId()</a>.</p>

<p>Referenced by <a class="el" href="_msg_queue_8cpp_source.html#l00058">KKB::MsgQueue::AddMsg()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00086">KKB::MsgQueue::AddMsgs()</a>, <a class="el" href="_goal_keeper_simple_8cpp_source.html#l00231">CreateAndStartBlock()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00125">KKB::MsgQueue::GetAllMsgs()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00157">KKB::MsgQueue::GetCopyOfLastMsg()</a>, <a class="el" href="_msg_queue_8cpp_source.html#l00107">KKB::MsgQueue::GetNextMsg()</a>, and <a class="el" href="_msg_queue_8cpp_source.html#l00146">KKB::MsgQueue::MemoryConsumedEstimated()</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">kkint32</a>  curThreadId = <a class="code" href="namespace_k_k_b.html#aa1d581b15163a41037c43bdbd800d0f8">KKB::osGetThreadId</a> ();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span>  (blocked  &amp;&amp;  (curThreadId == blockerThreadId))</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    ++levels;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    CriticalSectionStart ();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    levels = 1;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    blockerThreadId = curThreadId;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    blocked = <span class="keyword">true</span>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">return</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}   <span class="comment">/* StartBlock */</span></div><div class="ttc" id="namespace_k_k_b_html_a8fa4952cc84fda1de4bec1fbdd8d5b1b"><div class="ttname"><a href="namespace_k_k_b.html#a8fa4952cc84fda1de4bec1fbdd8d5b1b">KKB::kkint32</a></div><div class="ttdeci">__int32 kkint32</div><div class="ttdef"><b>Definition:</b> <a href="_k_k_base_types_8h_source.html#l00088">KKBaseTypes.h:88</a></div></div>
<div class="ttc" id="namespace_k_k_b_html_aa1d581b15163a41037c43bdbd800d0f8"><div class="ttname"><a href="namespace_k_k_b.html#aa1d581b15163a41037c43bdbd800d0f8">KKB::osGetThreadId</a></div><div class="ttdeci">kkint32 osGetThreadId()</div><div class="ttdef"><b>Definition:</b> <a href="_o_sservices_8cpp_source.html#l02752">OSservices.cpp:2752</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a3c22ebe8b841379f92ef7cdfe3aed61c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_k_k_b_1_1_k_k_queue.html">KKQueue</a>&lt; <a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a> &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_goal_keeper_simple_8h_source.html#l00041">41</a> of file <a class="el" href="_goal_keeper_simple_8h_source.html">GoalKeeperSimple.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Users/Kurt/GitHub/KSquareLibraries/KKBase/<a class="el" href="_goal_keeper_simple_8h_source.html">GoalKeeperSimple.h</a></li>
<li>C:/Users/Kurt/GitHub/KSquareLibraries/KKBase/<a class="el" href="_goal_keeper_simple_8cpp_source.html">GoalKeeperSimple.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_k_k_b.html">KKB</a></li><li class="navelem"><a class="el" href="class_k_k_b_1_1_goal_keeper_simple.html">GoalKeeperSimple</a></li>
    <li class="footer">Generated on Thu Mar 31 2016 22:47:29 for KSquare Utilities by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>

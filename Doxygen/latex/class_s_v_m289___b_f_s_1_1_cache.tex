\hypertarget{class_s_v_m289___b_f_s_1_1_cache}{}\section{S\+V\+M289\+\_\+\+B\+FS\+:\+:Cache Class Reference}
\label{class_s_v_m289___b_f_s_1_1_cache}\index{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_s_v_m289___b_f_s_1_1_cache_a46b5c8c4a6ab1dfcce296f088c301914}{Cache} (\hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} l, \hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} size)
\begin{DoxyCompactList}\small\item\em \hyperlink{class_s_v_m289___b_f_s_1_1_kernel}{Kernel} \hyperlink{class_s_v_m289___b_f_s_1_1_cache}{Cache}. \end{DoxyCompactList}\item 
\hyperlink{class_s_v_m289___b_f_s_1_1_cache_a90e41f69caf1ed0c91cfcb37250facf9}{$\sim$\+Cache} ()
\item 
\hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} \hyperlink{class_s_v_m289___b_f_s_1_1_cache_a95c3d5d6c3dcbeccc839e075a18632c8}{get\+\_\+data} (const \hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} index, \hyperlink{namespace_s_v_m289___b_f_s_a8b0a7657dcefcb6e9a857c9b5e2fd2ef}{Qfloat} $\ast$$\ast$data, \hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} len)
\begin{DoxyCompactList}\small\item\em Request data \mbox{[}0,len) \end{DoxyCompactList}\item 
void \hyperlink{class_s_v_m289___b_f_s_1_1_cache_acd8f8f78ff0ca175f2fba2da2998b2ba}{swap\+\_\+index} (\hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} i, \hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32} j)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 649 of file svm289\+\_\+\+B\+F\+S.\+cpp.



\subsection{Constructor \& Destructor Documentation}
\index{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}!Cache@{Cache}}
\index{Cache@{Cache}!S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}}
\subsubsection[{\texorpdfstring{Cache(kkint32 l, kkint32 size)}{Cache(kkint32 l, kkint32 size)}}]{\setlength{\rightskip}{0pt plus 5cm}S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache\+::\+Cache (
\begin{DoxyParamCaption}
\item[{{\bf kkint32}}]{l, }
\item[{{\bf kkint32}}]{size}
\end{DoxyParamCaption}
)}\hypertarget{class_s_v_m289___b_f_s_1_1_cache_a46b5c8c4a6ab1dfcce296f088c301914}{}\label{class_s_v_m289___b_f_s_1_1_cache_a46b5c8c4a6ab1dfcce296f088c301914}


\hyperlink{class_s_v_m289___b_f_s_1_1_kernel}{Kernel} \hyperlink{class_s_v_m289___b_f_s_1_1_cache}{Cache}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em l} & The number of total data items. \\
\hline
\mbox{\tt in}  & {\em size} & The cache size limit in bytes \\
\hline
\end{DoxyParams}


Definition at line 698 of file svm289\+\_\+\+B\+F\+S.\+cpp.



Referenced by S\+V\+M289\+\_\+\+B\+F\+S\+::\+O\+N\+E\+\_\+\+C\+L\+A\+S\+S\+\_\+\+Q\+::\+O\+N\+E\+\_\+\+C\+L\+A\+S\+S\+\_\+\+Q(), S\+V\+M289\+\_\+\+B\+F\+S\+::\+S\+V\+C\+\_\+\+Q\+::\+S\+V\+C\+\_\+\+Q(), and S\+V\+M289\+\_\+\+B\+F\+S\+::\+S\+V\+R\+\_\+\+Q\+::\+S\+V\+R\+\_\+\+Q().


\begin{DoxyCode}
700                           :
701       l    (l\_),
702       size (size\_)
703 \{
704   head = (head\_t *)calloc (l, \textcolor{keyword}{sizeof} (head\_t));  \textcolor{comment}{// initialized to 0}
705   size /= \textcolor{keyword}{sizeof} (\hyperlink{namespace_s_v_m289___b_f_s_a8b0a7657dcefcb6e9a857c9b5e2fd2ef}{Qfloat});
706   size -= l * \textcolor{keyword}{sizeof} (head\_t) / \textcolor{keyword}{sizeof} (\hyperlink{namespace_s_v_m289___b_f_s_a8b0a7657dcefcb6e9a857c9b5e2fd2ef}{Qfloat});
707   size = \hyperlink{namespace_k_k_b_a25e187e24c091586293725f27f007ad7}{Max} (size, 2 * (\hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32}) l);  \textcolor{comment}{// cache must be large enough for two columns}
708   lru\_head.next = lru\_head.prev = &lru\_head;
709 \}
\end{DoxyCode}
\index{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}!````~Cache@{$\sim$\+Cache}}
\index{````~Cache@{$\sim$\+Cache}!S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}}
\subsubsection[{\texorpdfstring{$\sim$\+Cache()}{~Cache()}}]{\setlength{\rightskip}{0pt plus 5cm}S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache\+::$\sim$\+Cache (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_s_v_m289___b_f_s_1_1_cache_a90e41f69caf1ed0c91cfcb37250facf9}{}\label{class_s_v_m289___b_f_s_1_1_cache_a90e41f69caf1ed0c91cfcb37250facf9}


Definition at line 713 of file svm289\+\_\+\+B\+F\+S.\+cpp.


\begin{DoxyCode}
714 \{
715   \textcolor{keywordflow}{for}  (head\_t* h = lru\_head.next;  h != &lru\_head;  h = h->next)
716   \{\textcolor{keyword}{delete} (h->data);  h->data = NULL;\}
717   \textcolor{keyword}{delete} head;  head = NULL;
718 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}!get\+\_\+data@{get\+\_\+data}}
\index{get\+\_\+data@{get\+\_\+data}!S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}}
\subsubsection[{\texorpdfstring{get\+\_\+data(const kkint32 index, Qfloat $\ast$$\ast$data, kkint32 len)}{get_data(const kkint32 index, Qfloat **data, kkint32 len)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kkint32} Cache\+::get\+\_\+data (
\begin{DoxyParamCaption}
\item[{const {\bf kkint32}}]{index, }
\item[{{\bf Qfloat} $\ast$$\ast$}]{data, }
\item[{{\bf kkint32}}]{len}
\end{DoxyParamCaption}
)}\hypertarget{class_s_v_m289___b_f_s_1_1_cache_a95c3d5d6c3dcbeccc839e075a18632c8}{}\label{class_s_v_m289___b_f_s_1_1_cache_a95c3d5d6c3dcbeccc839e075a18632c8}


Request data \mbox{[}0,len) 

Return some position p where \mbox{[}p,len) need to be filled (p $>$= len if nothing needs to be filled) 

Definition at line 742 of file svm289\+\_\+\+B\+F\+S.\+cpp.



Referenced by S\+V\+M289\+\_\+\+B\+F\+S\+::\+S\+V\+C\+\_\+\+Q\+::get\+\_\+\+Q(), S\+V\+M289\+\_\+\+B\+F\+S\+::\+O\+N\+E\+\_\+\+C\+L\+A\+S\+S\+\_\+\+Q\+::get\+\_\+\+Q(), and S\+V\+M289\+\_\+\+B\+F\+S\+::\+S\+V\+R\+\_\+\+Q\+::get\+\_\+\+Q().


\begin{DoxyCode}
746 \{
747   head\_t*  h = &head[index];
748   \textcolor{keywordflow}{if}  (h->len) 
749     lru\_delete (h);
750 
751   \hyperlink{namespace_k_k_b_a8fa4952cc84fda1de4bec1fbdd8d5b1b}{kkint32}  more = len - h->len;
752 
753   \textcolor{keywordflow}{if}  (more > 0)
754   \{
755     \textcolor{comment}{// free old space}
756     \textcolor{keywordflow}{while}  (size < more)
757     \{
758       head\_t*  old = lru\_head.next;
759       lru\_delete (old);
760       \textcolor{keyword}{delete} old->data;  old->data = NULL;
761       size += old->len;
762       old->data = 0;
763       old->len  = 0;
764     \}
765 
766     \textcolor{comment}{// allocate new space}
767     h->data = (\hyperlink{namespace_s_v_m289___b_f_s_a8b0a7657dcefcb6e9a857c9b5e2fd2ef}{Qfloat} *)realloc(h->data, sizeof (\hyperlink{namespace_s_v_m289___b_f_s_a8b0a7657dcefcb6e9a857c9b5e2fd2ef}{Qfloat}) * len);
768     size -= more;
769     \hyperlink{namespace_s_v_m289___b_f_s_ab3100b6a2a7917c5fb6ef6aae0af496f}{SVM289\_BFS::swap} (h->len, len);
770   \}
771 
772   lru\_insert (h);
773   *data = h->data;
774   \textcolor{keywordflow}{return} len;
775 \}
\end{DoxyCode}
\index{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}!swap\+\_\+index@{swap\+\_\+index}}
\index{swap\+\_\+index@{swap\+\_\+index}!S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache@{S\+V\+M289\+\_\+\+B\+F\+S\+::\+Cache}}
\subsubsection[{\texorpdfstring{swap\+\_\+index(kkint32 i, kkint32 j)}{swap_index(kkint32 i, kkint32 j)}}]{\setlength{\rightskip}{0pt plus 5cm}void Cache\+::swap\+\_\+index (
\begin{DoxyParamCaption}
\item[{{\bf kkint32}}]{i, }
\item[{{\bf kkint32}}]{j}
\end{DoxyParamCaption}
)}\hypertarget{class_s_v_m289___b_f_s_1_1_cache_acd8f8f78ff0ca175f2fba2da2998b2ba}{}\label{class_s_v_m289___b_f_s_1_1_cache_acd8f8f78ff0ca175f2fba2da2998b2ba}


Definition at line 779 of file svm289\+\_\+\+B\+F\+S.\+cpp.



Referenced by S\+V\+M289\+\_\+\+B\+F\+S\+::\+S\+V\+C\+\_\+\+Q\+::swap\+\_\+index(), and S\+V\+M289\+\_\+\+B\+F\+S\+::\+O\+N\+E\+\_\+\+C\+L\+A\+S\+S\+\_\+\+Q\+::swap\+\_\+index().


\begin{DoxyCode}
780 \{
781   \textcolor{keywordflow}{if}  ( i == j) 
782     \textcolor{keywordflow}{return};
783 
784   \textcolor{keywordflow}{if}  (head[i].len) 
785     lru\_delete (&head[i]);
786 
787   \textcolor{keywordflow}{if}  (head[j].len) 
788     lru\_delete(&head[j]);
789 
790 
791   \hyperlink{namespace_s_v_m289___b_f_s_ab3100b6a2a7917c5fb6ef6aae0af496f}{SVM289\_BFS::swap} (head[i].data, head[j].data);
792 
793   \hyperlink{namespace_s_v_m289___b_f_s_ab3100b6a2a7917c5fb6ef6aae0af496f}{SVM289\_BFS::swap} (head[i].len,  head[j].len);
794 
795   \textcolor{keywordflow}{if}  (head[i].len) 
796     lru\_insert(&head[i]);
797 
798   \textcolor{keywordflow}{if}  (head[j].len) 
799     lru\_insert(&head[j]);
800 
801   \textcolor{keywordflow}{if}  (i > j) 
802     \hyperlink{namespace_s_v_m289___b_f_s_ab3100b6a2a7917c5fb6ef6aae0af496f}{SVM289\_BFS::swap}(i, j);
803 
804 
805   \textcolor{keywordflow}{for}  (head\_t*  h = lru\_head.next;  h != &lru\_head;  h = h->next)
806   \{
807     \textcolor{keywordflow}{if}  (h->len > i)
808     \{
809       \textcolor{keywordflow}{if}  (h->len > j)
810       \{
811         \hyperlink{namespace_s_v_m289___b_f_s_ab3100b6a2a7917c5fb6ef6aae0af496f}{SVM289\_BFS::swap} (h->data[i], h->data[j]);
812       \}
813       \textcolor{keywordflow}{else}
814       \{
815         \textcolor{comment}{// give up}
816         lru\_delete (h);
817         \textcolor{keyword}{delete} h->data;  h->data = NULL;
818         size += h->len;
819         h->data = 0;
820         h->len  = 0;
821       \} 
822     \}
823   \}
824 \}  \textcolor{comment}{/* swap\_index */}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/\+Kurt/\+Git\+Hub/\+K\+Square\+Libraries/\+K\+K\+Machine\+Learning/\hyperlink{svm289___b_f_s_8cpp}{svm289\+\_\+\+B\+F\+S.\+cpp}\end{DoxyCompactItemize}
